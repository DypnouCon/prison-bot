import telebot
import os
from telebot.types import InlineKeyboardMarkup, InlineKeyboardButton, ReplyKeyboardRemove
from flask import Flask
from threading import Thread

# ========== –ù–ê–°–¢–†–û–ô–ö–ò ==========
BOT_TOKEN = '8025037882:AAGg047cDKMWDF_w4pUh3H5qFfSBChJIkFo'
bot = telebot.TeleBot(BOT_TOKEN)
app = Flask('')

# –°—Å—ã–ª–∫–∞ –Ω–∞ —Ç–≤–æ–µ —Å—Ç–∞—Ä—Ç–æ–≤–æ–µ —Ñ–æ—Ç–æ (raw —Ñ–æ—Ä–º–∞—Ç)
START_IMG = "https://raw.githubusercontent.com/DypnouCon/prison-bot/main/starttext.jpeg"

# ========== –ü–û–î–†–û–ë–ù–´–ï –¢–ï–ö–°–¢–´ –ì–ê–ô–î–û–í ==========
TEXTS = {
    "start": (
        "üëã **–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Prison Helper!**\n\n"
        "–≠—Ç–æ—Ç –±–æ—Ç —Å–æ–∑–¥–∞–Ω –∫–∞–∫ –µ–¥–∏–Ω–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –¥–ª—è –∏–≥—Ä–æ–∫–æ–≤ ¬´The Prison¬ª. "
        "–ó–¥–µ—Å—å —Å–æ–±—Ä–∞–Ω–∞ –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: –æ—Ç —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –±–æ—Å—Å–æ–≤ –¥–æ —Å–∫—Ä—ã—Ç—ã—Ö –±–æ–Ω—É—Å–æ–≤ —à–º–æ—Ç–∞.\n\n"
        "–ü–æ–ª—å–∑—É–π—Ç–µ—Å—å –º–µ–Ω—é –Ω–∏–∂–µ, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–π —Ä–∞–∑–¥–µ–ª. "
        "–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∏–¥–µ–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é ‚Äî –∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏!"
    ),
    
    "energy": (
        "üìç **–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ¬ª ‚ö°Ô∏è –≠–Ω–µ—Ä–≥–∏—è**\n\n"
        "**–ë–∞–∑–æ–≤—ã–π –∑–∞–ø–∞—Å:** 50 –µ–¥.\n\n"
        "**üìö –¢–∞–ª–∞–Ω—Ç—ã:**\n"
        "‚Ä¢ –í—Ç–æ—Ä–æ–µ –¥—ã—Ö–∞–Ω–∏–µ: +70 –µ–¥.\n"
        "‚Ä¢ –ê–¥—Ä–µ–Ω–∞–ª–∏–Ω: +40 –µ–¥.\n\n"
        "**üëï –û–¥–µ–∂–¥–∞ –∏ –ú–∞—Å—Ç–µ—Ä–∞:**\n"
        "‚Ä¢ –ö–æ–º–ø–ª–µ–∫—Ç –ê–º–µ—Ä–∏–∫–∞–Ω–µ—Ü (3 –≤–µ—â–∏ –∏–∑ –ø–æ—Å—ã–ª–æ–∫): +30 –µ–¥.\n"
        "‚Ä¢ –ö–æ–º–ø–ª–µ–∫—Ç –î–æ—à–∏–∫ (–ø–æ—Å—ã–ª–∫–∞): +20 –µ–¥.\n"
        "‚Ä¢ –ö–æ–º–ø–ª–µ–∫—Ç –ü–∏—Ä–æ–∂–æ–∫ (–ú–∞—Å—Ç–µ—Ä –°–µ–≤–∞, 7 —É—Ä–æ–≤–µ–Ω—å): +10 –µ–¥.\n"
        "‚Ä¢ –ö–æ–º–ø–ª–µ–∫—Ç –ß–µ—Ç–∫–∏ (–ú–∞—Å—Ç–µ—Ä –í–∞–Ω—å–∫–∞, 10 —É—Ä–æ–≤–µ–Ω—å): +10 –µ–¥.\n"
        "‚Ä¢ –°–µ—Ç—ã F1, –ú–æ–Ω–µ—Ç–Ω–∏—Ü–∞, –†–∞–¥–∏–æ: –ø–æ +10 –µ–¥.\n\n"
        "**üóÑ –ó–∞–Ω—ã–∫–∞–Ω–Ω—ã–π —à–º–æ—Ç –∏ –°–µ—Ç—ã:**\n"
        "‚Ä¢ –°–µ—Ç –†–æ–±–∏–Ω –ì—É–¥ (–ø–æ–∫—É–ø–∞–µ—Ç—Å—è —É –±–∞—Ä—ã–≥–∏, –∑–∞ –≤—Å–µ —Å–ª–æ—Ç—ã): +39 –µ–¥.\n"
        "‚Ä¢ –°–µ—Ç –õ–∏—Ö–∏–µ 90 (–°–ª–µ–ø–æ–π –∫–æ–ª—å—â–∏–∫): +20 –µ–¥.\n"
        "‚Ä¢ –°–µ—Ç –û–±–æ—Ä–æ—Ç–µ–Ω—å (–°–ª–µ–ø–æ–π –∫–æ–ª—å—â–∏–∫): +15 –µ–¥.\n"
        "‚Ä¢ –ö–æ–º–ø–ª–µ–∫—Ç –û–ª–∏–º–ø–∏–µ—Ü: +12 –µ–¥."
    ),

    "finka_main": (
        "üìç **–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ¬ª üó° –§–∏–Ω–∫–∞**\n\n"
        "–ó–¥–µ—Å—å —Å–æ–±—Ä–∞–Ω—ã –≤—Å–µ —Å–ø–æ—Å–æ–±—ã —É–≤–µ–ª–∏—á–∏—Ç—å –≤–∞—à —É—Ä–æ–Ω —Ñ–∏–Ω–∫–æ–π. "
        "–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é:"
    ),

    "finka_tats": (
        "üìç **–§–∏–Ω–∫–∞ ¬ª ‚úçÔ∏è –ù–∞–∫–æ–ª–∫–∏**\n\n"
        "**ü¶¥ –ö–æ–º–ø–ª–µ–∫—Ç –ö–æ—Å—Ç–∏ (+225 —É—Ä–æ–Ω):**\n"
        "–î–æ–±—ã–≤–∞–µ—Ç—Å—è –≤ —Ç—é—Ä—å–º–µ ¬´–ö—Ä–µ—Å—Ç—ã¬ª. –í–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å –ø–∞–¥–∞–µ—Ç –≤ –¥–Ω–µ–≤–Ω—ã—Ö –¥–≤–∏–∂—É—Ö–∞—Ö, –Ω–∏–∂–Ω—è—è ‚Äî –≤ –Ω–æ—á–Ω—ã—Ö.\n\n"
        "**üëÅ –ú–µ—Ç–∫–∏ –°—É–¥—å–±—ã (+180 —É—Ä–æ–Ω):**\n"
        "–í—ã–ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –ø–æ–±–µ–¥–µ –≤ –∫–æ–º–±–æ-–±–æ—é —Å –ê–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω—ã–º –®–∞–π–±–æ–π.\n\n"
        "**‚õì –ö–æ–º–ø–ª–µ–∫—Ç –ü–ª–µ–Ω–Ω–∏–∫ (+180 —É—Ä–æ–Ω):**\n"
        "–í—ã–ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –ø–æ–±–µ–¥–µ –Ω–∞–¥ –ü–∞—Ü–∞–Ω—Å–∫–∏–º –î—è–¥–µ–π –ú–∏—à–µ–π.\n\n"
        "**üêØ –ö–æ–º–ø–ª–µ–∫—Ç –ó–≤–µ—Ä–∏–Ω–µ—Ü (+80 —É—Ä–æ–Ω):**\n"
        "–ü–æ–ª–Ω—ã–π —Å–µ—Ç –∏–∑ 10 –Ω–∞–∫–æ–ª–æ–∫. –ü–æ–∫—É–ø–∞–µ—Ç—Å—è –≤ –º–∞–≥–∞–∑–∏–Ω–µ –∑–∞ –∏–≥—Ä–æ–≤—É—é –≤–∞–ª—é—Ç—É.\n\n"
        "**üë∏ –ü—Ä–∏–Ω—Ü–µ—Å—Å–∞ (+80 —É—Ä–æ–Ω):**\n"
        "–ú–æ–∂–Ω–æ –≤—ã–∏–≥—Ä–∞—Ç—å –≤ –º–∏–Ω–∏-–∏–≥—Ä–µ ¬´–ö–∞—Ç–∞–ª–∞¬ª.\n\n"
        "**üé≠ –ú–∞—Ñ–∏–æ–∑–∏ (+80 —É—Ä–æ–Ω):**\n"
        "–†–µ–¥–∫–∏–π —Å–µ—Ç —É –°–ª–µ–ø–æ–≥–æ –ö–æ–ª—å—â–∏–∫–∞."
    ),

    "finka_wear": (
        "üìç **–§–∏–Ω–∫–∞ ¬ª üëï –®–º–æ—Ç–∫–∏ –∏ –≠–∫–∏–ø–∏—Ä–æ–≤–∫–∞**\n\n"
        "**üë∫ –°–µ—Ç –ì–∞–Ω–Ω–∏–±–∞–ª (+180 —É—Ä–æ–Ω):**\n"
        "–°–µ—Ç –æ–¥–µ–∂–¥—ã. –í—ã–ø–∞–¥–∞–µ—Ç —Å –±–æ—Å—Å–∞ –ê–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –•–∏—Ä—É—Ä–≥.\n\n"
        "**üî™ –°–µ—Ç –û–ø–∞—Å–Ω—ã–π (+150 —É—Ä–æ–Ω):**\n"
        "–°–µ—Ç –æ–¥–µ–∂–¥—ã. –í—ã–ø–∞–¥–∞–µ—Ç —Å –±–æ—Å—Å–∞ –ü–∞—Ü–∞–Ω—Å–∫–∏–π –•–∏—Ä—É—Ä–≥.\n\n"
        "**üáØüáµ –°–µ—Ç –Ø–∫—É–¥–∑–∞ (+40 —É—Ä–æ–Ω):**\n"
        "–°–µ—Ç –æ–¥–µ–∂–¥—ã. –í—ã–ø–∞–¥–∞–µ—Ç —Å –±–æ—Å—Å–∞ –ë–ª–∞—Ç–Ω–æ–π –ë—É—Ä—è—Ç.\n\n"
        "**üì¶ –ó–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ –ø–æ—Å—ã–ª–∫–∏:**\n"
        "‚Ä¢ –®–≤–µ–π—Ü–∞—Ä—Å–∫–∏–π –Ω–æ–∂–∏–∫ (–≤ —Ä—É–∫—É): +20 —É—Ä–æ–Ω.\n"
        "‚Ä¢ –ú–∞–π–∫–∞ (–Ω–∞ —Ç–µ–ª–æ): +30 —É—Ä–æ–Ω.\n"
        "‚Ä¢ –ö—Ä—é–∫ (–≤ —Ä—É–∫—É): +10 —É—Ä–æ–Ω.\n\n"
        "**üèô –¢—é—Ä–µ–º–Ω—ã–µ –¥–≤–∏–∂—É—Ö–∏ (–æ–¥–µ–∂–¥–∞):**\n"
        "‚Ä¢ –ê—Ä–º–∞–Ω–∏: +35 (–ª–æ–∫–∞—Ü–∏—è –£–≥–æ–ª—å–∫–∏).\n"
        "‚Ä¢ –ö–µ–ª—å–≤–∏–Ω –ö–ª—è–π–Ω: +30 (–ª–æ–∫–∞—Ü–∏—è –ö—Ä–µ—Å—Ç—ã).\n"
        "‚Ä¢ D&G: +25 (–ª–æ–∫–∞—Ü–∏—è –õ–µ—Ñ–æ—Ä—Ç–æ–≤–∫–∞).\n"
        "‚Ä¢ –ì—É—á–∏ / –ì–µ—Ä–º–µ—Å: –ø–æ +20."
    ),

    "samopal": (
        "üìç **–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ¬ª üî´ –°–∞–º–æ–ø–∞–ª**\n\n"
        "**‚õîÔ∏è –ë–æ—Å—Å—ã (—É—Ä–æ–Ω –≤ —Å–µ—Ç):**\n"
        "‚Ä¢ –î—é–±–µ–ª—å (–ê–≤—Ç–æ): +300\n"
        "‚Ä¢ –î—è–¥—è –ú–∏—à–∞ (–ë–ª–∞—Ç): +210\n"
        "‚Ä¢ –®–∞–π–±–∞ (–ê–≤—Ç–æ): +160\n\n"
        "**üé∞ –ê–∑–∞—Ä—Ç–Ω—ã–µ –∏–≥—Ä—ã:**\n"
        "‚Ä¢ –ü–æ–∫–µ—Ä (–°–µ—Ç –î—å—è–≤–æ–ª—å—Å–∫–∞—è —É–¥–∞—á–∞, 42 —à—Ç): +400\n"
        "‚Ä¢ –ö–∞—Ç–∞–ª–∞ (–°–µ—Ç –ü–∞–¥—à–∏–π –ê–Ω–≥–µ–ª, 34 —à—Ç): +90\n"
        "‚Ä¢ –ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã (–°–µ—Ç—ã –ñ–º—É—Ä–∫–∏ + –ó–Ω–∞—Ç–æ–∫): +100\n\n"
        "**üõ† –ú–∞—Å—Ç–µ—Ä–∞:**\n"
        "‚Ä¢ –Ø–Ω–∫–∞ (–°–µ—Ç –û–±—Ä—è–¥, 38 —à—Ç): +80\n"
        "‚Ä¢ –ö–µ—à–∞ (–°–µ—Ç –¢–æ–ª—Å—Ç–æ—Å—É–º, 4 —à—Ç): +40\n"
        "‚Ä¢ –°–µ—Ç –¢–ª–µ–Ω (+90): —Å–±–æ—Ä–Ω—ã–π –±–æ–Ω—É—Å –∑–∞ –ø—Ä–æ–∫–∞—á–∫—É –≤—Å–µ—Ö –º–∞—Å—Ç–µ—Ä–æ–≤ (–Ø—à–∞, –ê—à–æ—Ç, –ñ–æ—Ä–∞ –∏ –¥—Ä.)."
    ),

    "bosses_main": "üìç **–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ¬ª üëä –ë–æ—Å—Å—ã**\n\n–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –•–ü:",

    "bosses_bespredel": (
        "üìç **–ë–æ—Å—Å—ã ¬ª –ë–µ—Å–ø—Ä–µ–¥–µ–ª—å—â–∏–∫–∏**\n\n"
        "**–®–∞–π–±–∞:**\n"
        "–ü–∞—Ü–∞–Ω—Å–∫–∏–π: 50–∫ | –ë–ª–∞—Ç–Ω–æ–π: 150–∫ | –ê–≤—Ç–æ: 300–∫\n\n"
        "**–î—è–¥—è –ú–∏—à–∞:**\n"
        "–ü–∞—Ü–∞–Ω—Å–∫–∏–π: 3–º | –ë–ª–∞—Ç–Ω–æ–π: 9–º | –ê–≤—Ç–æ: 18–º\n\n"
        "**–•–∏—Ä—É—Ä–≥:**\n"
        "–ü–∞—Ü–∞–Ω—Å–∫–∏–π: 30–º | –ë–ª–∞—Ç–Ω–æ–π: 90–º | –ê–≤—Ç–æ: 180–º\n\n"
        "**–¢—Ä–æ—Ç–∏–ª:**\n"
        "–ü–∞—Ü–∞–Ω—Å–∫–∏–π: 200–º | –ë–ª–∞—Ç–Ω–æ–π: 600–º | –ê–≤—Ç–æ: 1.2–± | –í–æ—Ä–æ–≤—Å–∫–æ–π: 2.4–±"
    ),

    "bosses_vertuhai": (
        "üìç **–ë–æ—Å—Å—ã ¬ª –í–µ—Ä—Ç—É—Ö–∞–∏**\n\n"
        "**–ü–∞–ª—ã—á:** 100 000\n"
        "**–ë–ª–∏–∑–Ω–µ—Ü—ã:** 2 000 000\n\n"
        "**–ë–æ—Ä–∑–æ–≤:**\n"
        "–ü–∞—Ü–∞–Ω—Å–∫–∏–π: 3–º | –ë–ª–∞—Ç–Ω–æ–π: 9–º | –ê–≤—Ç–æ: 18–º\n\n"
        "**–î—é–±–µ–ª—å:**\n"
        "–ü–∞—Ü–∞–Ω—Å–∫–∏–π: 40–º | –ë–ª–∞—Ç–Ω–æ–π: 120–º | –ê–≤—Ç–æ: 240–º\n\n"
        "**–ì—Ä–æ–º:**\n"
        "–ü–∞—Ü: 70–º | –ë–ª–∞—Ç: 210–º | –ê–≤—Ç–æ: 420–º | –í–æ—Ä: 840–º"
    )
}

# ========== –ö–õ–ê–í–ò–ê–¢–£–†–´ (–ò–ù–õ–ê–ô–ù) ==========
def get_main_kb():
    kb = InlineKeyboardMarkup(row_width=2)
    kb.add(
        InlineKeyboardButton("‚ö°Ô∏è –≠–Ω–µ—Ä–≥–∏—è", callback_data="energy"),
        InlineKeyboardButton("üó° –§–∏–Ω–∫–∞", callback_data="finka"),
        InlineKeyboardButton("üî´ –°–∞–º–æ–ø–∞–ª", callback_data="samopal"),
        InlineKeyboardButton("üëä –ë–æ—Å—Å—ã", callback_data="bosses"),
        InlineKeyboardButton("üì¶ –°–∫–ª–∞–¥", callback_data="sklad"),
        InlineKeyboardButton("üíé –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å", callback_data="thanks")
    )
    kb.row(InlineKeyboardButton("üí¨ –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å / –ò–¥–µ–∏", url="https://t.me/gbg_georg"))
    return kb

def get_finka_kb():
    kb = InlineKeyboardMarkup(row_width=1)
    kb.add(
        InlineKeyboardButton("‚úçÔ∏è –ù–∞–∫–æ–ª–∫–∏", callback_data="f_tats"),
        InlineKeyboardButton("üëï –®–º–æ—Ç–∫–∏", callback_data="f_wear"),
        InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="to_main")
    )
    return kb

def get_bosses_kb():
    kb = InlineKeyboardMarkup(row_width=1)
    kb.add(
        InlineKeyboardButton("üíÄ –ë–µ—Å–ø—Ä–µ–¥–µ–ª—å—â–∏–∫–∏", callback_data="b_bespredel"),
        InlineKeyboardButton("üëÆ‚Äç‚ôÇÔ∏è –í–µ—Ä—Ç—É—Ö–∞–∏", callback_data="b_vertuhai"),
        InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="to_main")
    )
    return kb

# ========== –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò ==========
@bot.message_handler(commands=['start'])
def start(message):
    bot.send_message(message.chat.id, "–ó–∞–≥—Ä—É–∑–∫–∞...", reply_markup=ReplyKeyboardRemove())
    bot.send_photo(
        message.chat.id, 
        START_IMG, 
        caption=TEXTS["start"], 
        reply_markup=get_main_kb(), 
        parse_mode="Markdown"
    )

@bot.callback_query_handler(func=lambda call: True)
def handle_query(call):
    # –¢–µ–ø–µ—Ä—å –º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –¢–ï–ö–°–¢, –∫–∞—Ä—Ç–∏–Ω–∫–∞ –∏–∑ —Å—Ç–∞—Ä—Ç–∞ –æ—Å—Ç–∞–µ—Ç—Å—è —Å–≤–µ—Ä—Ö—É –∏–ª–∏ —É—Ö–æ–¥–∏—Ç
    cid = call.message.chat.id
    mid = call.message.message_id

    try:
        if call.data == "to_main":
            bot.edit_message_caption(TEXTS["start"], cid, mid, reply_markup=get_main_kb(), parse_mode="Markdown")
        
        elif call.data == "energy":
            bot.edit_message_caption(TEXTS["energy"], cid, mid, reply_markup=InlineKeyboardMarkup().add(InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="to_main")), parse_mode="Markdown")
            
        elif call.data == "finka":
            bot.edit_message_caption(TEXTS["finka_main"], cid, mid, reply_markup=get_finka_kb(), parse_mode="Markdown")
            
        elif call.data == "f_tats":
            bot.edit_message_caption(TEXTS["finka_tats"], cid, mid, reply_markup=InlineKeyboardMarkup().add(InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="finka")), parse_mode="Markdown")
            
        elif call.data == "f_wear":
            bot.edit_message_caption(TEXTS["finka_wear"], cid, mid, reply_markup=InlineKeyboardMarkup().add(InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="finka")), parse_mode="Markdown")
            
        elif call.data == "samopal":
            bot.edit_message_caption(TEXTS["samopal"], cid, mid, reply_markup=InlineKeyboardMarkup().add(InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="to_main")), parse_mode="Markdown")
            
        elif call.data == "bosses":
            bot.edit_message_caption(TEXTS["bosses_main"], cid, mid, reply_markup=get_bosses_kb(), parse_mode="Markdown")
            
        elif call.data == "b_bespredel":
            bot.edit_message_caption(TEXTS["bosses_bespredel"], cid, mid, reply_markup=InlineKeyboardMarkup().add(InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="bosses")), parse_mode="Markdown")
            
        elif call.data == "b_vertuhai":
            bot.edit_message_caption(TEXTS["bosses_vertuhai"], cid, mid, reply_markup=InlineKeyboardMarkup().add(InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="bosses")), parse_mode="Markdown")

        elif call.data == "sklad":
            bot.edit_message_caption("üì¶ **–°–∫–ª–∞–¥**\n\n–£–ø—Å... —Ç—ã –∑–∞—Å—Ç–∞–ª –º–µ–Ω—è –≤—Ä–∞—Å–ø–ª–æ—Ö –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç–æ–π. –°–∫–æ—Ä–æ —ç—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏!", cid, mid, reply_markup=InlineKeyboardMarkup().add(InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", callback_data="to_main")), parse_mode="Markdown")

    except Exception:
        # –ï—Å–ª–∏ –≤–¥—Ä—É–≥ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–Ω–æ –±—ã–ª–æ –±–µ–∑ –∫–∞—Ä—Ç–∏–Ω–∫–∏)
        bot.send_message(cid, "–í–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –º–µ–Ω—é:", reply_markup=get_main_kb())

# ========== –ó–ê–ü–£–°–ö ==========
@app.route('/')
def home(): return "OK"

if __name__ == '__main__':
    Thread(target=lambda: app.run(host='0.0.0.0', port=int(os.environ.get("PORT", 8080)))).start()
    bot.delete_webhook(drop_pending_updates=True)
    bot.polling(none_stop=True)
