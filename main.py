import telebot
import os
import time
from telebot.types import InlineKeyboardMarkup, InlineKeyboardButton, InputMediaPhoto
from flask import Flask
from threading import Thread

# ========== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø ==========
BOT_TOKEN = '8025037882:AAGg047cDKMWDF_w4pUh3H5qFfSBChJIkFo'
bot = telebot.TeleBot(BOT_TOKEN)
server = Flask(__name__)

# –ü—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ (RAW) –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –æ—à–∏–±–∫–∏ "wrong type of content"
BASE_URL = "https://raw.githubusercontent.com/DypnouCon/prison-bot/main/"
IMAGES = {
    "start": BASE_URL + "welcome.png",
    "energy": BASE_URL + "EnergyBloc.png",
    "finka": BASE_URL + "FinkaBloc.png",
    "samopal": BASE_URL + "SamopalBloc.png",
    "poison": BASE_URL + "PoiseBloc.png",
    "os": BASE_URL + "OSBloc.png",
    "donate": BASE_URL + "DonateBloc.png",
    "bosses": BASE_URL + "BossesBloc.png",
    "sklad": BASE_URL + "SkladBloc.png"
}

# ========== –¢–ï–ü–õ–´–ï –ò –ü–û–î–†–û–ë–ù–´–ï –¢–ï–ö–°–¢–´ ==========
TEXTS = {
    "start": (
        "üëã **–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π, –¥–æ—Ä–æ–≥–æ–π –¥—Ä—É–≥!**\n\n"
        "–ú—ã –∏—Å–∫—Ä–µ–Ω–Ω–µ —Ä–∞–¥—ã –≤–∏–¥–µ—Ç—å —Ç–µ–±—è –≤ **TPHbot** (Prison Helper). –¢—ã –ø–æ–ø–∞–ª –≤ —É—é—Ç–Ω—ã–π —É–≥–æ–ª–æ–∫, "
        "—Å–æ–∑–¥–∞–Ω–Ω—ã–π –∏–≥—Ä–æ–∫–∞–º–∏ –¥–ª—è –∏–≥—Ä–æ–∫–æ–≤. –ó–¥–µ—Å—å –Ω–µ—Ç —Å—É–µ—Ç—ã, —Ç–æ–ª—å–∫–æ –ø–æ–ª–µ–∑–Ω—ã–µ –∑–Ω–∞–Ω–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞.\n\n"
        "–ú–∏—Ä ¬´–¢—é—Ä—è–≥–∏¬ª —Å—É—Ä–æ–≤, –Ω–æ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –Ω–∞–ø–∞—Ä–Ω–∏–∫–æ–º —Ç—ã –ø—Ä–æ–π–¥–µ—à—å —á–µ—Ä–µ–∑ –ª—é–±—ã–µ –∫–∞–º–µ—Ä—ã. "
        "–ú—ã —Å–æ–±—Ä–∞–ª–∏ –¥–ª—è —Ç–µ–±—è —Å–∞–º—ã–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –≥–∞–π–¥—ã –ø–æ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–µ, –±–æ—Å—Å–∞–º –∏ —Ä–µ—Å—É—Ä—Å–∞–º.\n\n"
        "–í—ã–±–∏—Ä–∞–π –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–π —Ä–∞–∑–¥–µ–ª –≤ –º–µ–Ω—é –Ω–∏–∂–µ. –ú—ã –≤—Å–µ–≥–¥–∞ —Ä—è–¥–æ–º! üëä"
    ),
    "energy": (
        "üìç **‚ö°Ô∏è –≠–Ω–µ—Ä–≥–∏—è ‚Äî —Ç–≤–æ–π –≥–ª–∞–≤–Ω—ã–π —Ä–µ—Å—É—Ä—Å**\n"
        "‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî\n"
        "–ß—Ç–æ–±—ã –Ω–µ –∑–∞–¥—ã—Ö–∞—Ç—å—Å—è –Ω–∞ ¬´–¥–≤–∏–∂—É—Ö–∞—Ö¬ª, –≤–∞–∂–Ω–æ –≥—Ä–∞–º–æ—Ç–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å–≤–æ–π –ª–∏–º–∏—Ç. –í–æ—Ç –∫–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å:\n\n"
        "üß¨ **–¢–∞–ª–∞–Ω—Ç—ã (–¥–∞—é—Ç –¥–æ +110 –µ–¥.):**\n"
        "‚Ä¢ *–í—Ç–æ—Ä–æ–µ –¥—ã—Ö–∞–Ω–∏–µ:* –∫–∞—á–∞–π –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å, –¥–∞–µ—Ç –≤–Ω—É—à–∏—Ç–µ–ª—å–Ω—ã–µ +70.\n"
        "‚Ä¢ *–ê–¥—Ä–µ–Ω–∞–ª–∏–Ω:* –¥–æ–±–∞–≤–∏—Ç –µ—â–µ +40 –∫ —Ç–≤–æ–µ–π –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç–∏.\n\n"
        "üëï **–°–µ—Ç—ã –æ–¥–µ–∂–¥—ã (—Å–æ–±–∏—Ä–∞–π –ø–æ —á–∞—Å—Ç—è–º):**\n"
        "‚Ä¢ **–ê–º–µ—Ä–∏–∫–∞–Ω–µ—Ü:** +30 –µ–¥. (–Ω–µ–æ–±—Ö–æ–¥–∏–º—ã —à—Ç–∞–Ω—ã, –∫—É—Ä—Ç–∫–∞ –∏ –±–æ—Ç–∏–Ω–∫–∏).\n"
        "‚Ä¢ **–î–æ—à–∏–∫:** –¥–∞–µ—Ç +20 –µ–¥. ‚Äî –æ—Ç–ª–∏—á–Ω—ã–π –±—é–¥–∂–µ—Ç–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.\n"
        "‚Ä¢ **–ü–∏—Ä–æ–∂–æ–∫:** +10 –µ–¥. (–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —É –ú–∞—Å—Ç–µ—Ä–∞ –°–µ–≤—ã –Ω–∞ 7 —É—Ä–æ–≤–Ω–µ).\n\n"
        "üìø **–ú–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ:**\n"
        "–ù–µ –∑–∞–±—ã–≤–∞–π –ø—Ä–æ **–í–∞–Ω—å–∫—É** (10 —É—Ä.), –µ–≥–æ —á–µ—Ç–∫–∏ –¥–æ–±–∞–≤—è—Ç –µ—â–µ +10 –µ–¥. —ç–Ω–µ—Ä–≥–∏–∏.\n\n"
        "*–°–æ–≤–µ—Ç –æ—Ç —Å–µ—Ä–¥—Ü–∞: –Ω–∞—á–∏–Ω–∞–π —Å —Ç–∞–ª–∞–Ω—Ç–æ–≤, —ç—Ç–æ —Å–∞–º—ã–π —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç!*"
    ),
    "finka": (
        "üìç **üó° –§–∏–Ω–∫–∞ ‚Äî —Ç–≤–æ—è –æ—Å—Ç—Ä–∞—è —Å–∏–ª–∞**\n"
        "‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî\n"
        "–§–∏–Ω–∫–∞ ‚Äî —ç—Ç–æ —Ç–≤–æ–π –ª–∏—á–Ω—ã–π —É—Ä–æ–Ω. –ß–µ–º –æ–Ω–∞ –æ—Å—Ç—Ä–µ–µ, —Ç–µ–º –±—ã—Å—Ç—Ä–µ–µ –ø–∞–¥–∞—é—Ç –±–æ—Å—Å—ã.\n\n"
        "‚úçÔ∏è **–ù–∞–∫–æ–ª–∫–∏ (–±–∞–∑–∞ —Ç–≤–æ–µ–π —Å–∏–ª—ã):**\n"
        "‚Ä¢ **–°–µ—Ç ¬´–ö–æ—Å—Ç–∏¬ª:** –¥–∞–µ—Ç +225 —É—Ä–æ–Ω–∞. –ù—É–∂–Ω–æ 12 –Ω–∞–∫–æ–ª–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–±–∏–≤–∞—é—Ç—Å—è –≤ –ö—Ä–µ—Å—Ç–∞—Ö.\n"
        "‚Ä¢ **–ú–µ—Ç–∫–∏ –°—É–¥—å–±—ã:** +180 —É—Ä–æ–Ω–∞. –°–æ–±–∏—Ä–∞—é—Ç—Å—è –∏–∑ 34 —á–∞—Å—Ç–µ–π, –ø–∞–¥–∞—é—Ç —Å –ê–≤—Ç–æ-–®–∞–π–±—ã.\n\n"
        "üë∫ **–≠–∫–∏–ø–∏—Ä–æ–≤–∫–∞ (–°–µ—Ç—ã):**\n"
        "‚Ä¢ **–ì–∞–Ω–Ω–∏–±–∞–ª:** —Ç–æ–ø–æ–≤—ã–π —Å–µ—Ç (+180 —É—Ä–æ–Ω–∞). –î–æ–±—ã–≤–∞–µ—Ç—Å—è –≤ –∑–∞—Ç—è–∂–Ω—ã—Ö –±–æ—è—Ö —Å –ê–≤—Ç–æ-–•–∏—Ä—É—Ä–≥–æ–º.\n"
        "‚Ä¢ **–û–ø–∞—Å–Ω—ã–π:** +150 —É—Ä–æ–Ω–∞. –•–æ—Ä–æ—à–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –±—å–µ—Ç –ü–∞—Ü–∞–Ω—Å–∫–æ–≥–æ –•–∏—Ä—É—Ä–≥–∞.\n\n"
        "*–ü–æ–º–Ω–∏: –Ω–∞–∫–æ–ª–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞, –ø–æ—ç—Ç–æ–º—É –Ω–∞—á–Ω–∏ —Å ¬´–ö–æ—Å—Ç–µ–π¬ª!*"
    ),
    "samopal": (
        "üìç **üî´ –°–∞–º–æ–ø–∞–ª ‚Äî –∫–ª–∞—Å—Å–∏–∫–∞ –∂–∞–Ω—Ä–∞**\n"
        "‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî\n"
        "–ë–∞–∑–æ–≤–æ–µ –æ—Ä—É–∂–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ç—Ä–µ–±—É–µ—Ç —Å–∞—Ö–∞—Ä–∞ –∏ —Ç–µ—Ä–ø–µ–Ω–∏—è.\n\n"
        "üëä **–ë–æ–Ω—É—Å—ã –æ—Ç —Å–µ—Ç–æ–≤ –±–æ—Å—Å–æ–≤:**\n"
        "‚Ä¢ **–î—é–±–µ–ª—å (–ê–≤—Ç–æ):** –¥–∞–µ—Ç —Å–∞–º—ã–π –º–æ—â–Ω—ã–π —Ä—ã–≤–æ–∫ ‚Äî +300 –∫ —É—Ä–æ–Ω—É.\n"
        "‚Ä¢ **–î—è–¥—è –ú–∏—à–∞ (–ë–ª–∞—Ç):** —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –±–æ–Ω—É—Å +210.\n"
        "‚Ä¢ **–®–∞–π–±–∞ (–ê–≤—Ç–æ):** –¥–æ–±–∞–≤–∏—Ç +160 –∫ —Ç–≤–æ–µ–º—É –≤—ã—Å—Ç—Ä–µ–ª—É.\n\n"
        "üõ† **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∞—Å—Ç–µ—Ä–æ–≤:**\n"
        "–ü—Ä–æ–∫–∞—á–∞–Ω–Ω–∞—è **–Ø–Ω–∫–∞** –¥–∞—Å—Ç +80 –∫ —É—Ä–æ–Ω—É, –∞ –µ—Å–ª–∏ –Ω–∞–¥–µ–Ω–µ—à—å —Å–µ—Ç **¬´–¢–ª–µ–Ω¬ª**, –ø–æ–ª—É—á–∏—à—å –µ—â–µ +90.\n\n"
        "*–ù–µ –∂–∞–ª–µ–π —Å–∞—Ö–∞—Ä–∞ –Ω–∞ –ø—Ä–æ–∫–∞—á–∫—É –æ—Ä—É–∂–∏—è, —ç—Ç–æ –æ–∫—É–ø–∞–µ—Ç—Å—è —Å –ª–∏—Ö–≤–æ–π!*"
    ),
    "poison": (
        "üìç **üß™ –Ø–¥ ‚Äî —Ç–∏—Ö–∏–π —É–±–∏–π—Ü–∞**\n"
        "‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî\n"
        "–Ø–¥ —Ö–æ—Ä–æ—à —Ç–µ–º, —á—Ç–æ –µ–≥–æ —É—Ä–æ–Ω –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–≤–æ–µ–π —Ñ–∏–Ω–∫–∏. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —É–¥–∞—Ä–∞.\n\n"
        "üß™ **–ß—Ç–æ –Ω—É–∂–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:**\n"
        "‚Ä¢ **–¢–∞–ª–∞–Ω—Ç ¬´–•–∏–º–∏–∫¬ª:** –±–µ–∑ –Ω–µ–≥–æ —É—Ä–æ–Ω —Ñ–ª–∞–∫–æ–Ω–∞–º–∏ –±—É–¥–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º.\n"
        "‚Ä¢ **–ú–∞—Å—Ç–µ—Ä –ê—à–æ—Ç:** –∫–∞—á–∞–π –¥–æ 10 —É—Ä–æ–≤–Ω—è, —á—Ç–æ–±—ã –≤—ã–∂–∞—Ç—å –º–∞–∫—Å–∏–º—É–º –∏–∑ —Ö–∏–º–∏–∏.\n\n"
        "üëï **–í–∞–∂–Ω—ã–µ —Å–µ—Ç—ã:**\n"
        "‚Ä¢ **–ß—É–º–Ω–æ–π –î–æ–∫—Ç–æ—Ä:** —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –æ–±—â–∏–π —É—Ä–æ–Ω —è–¥–æ–º –Ω–∞ 12%.\n"
        "‚Ä¢ **–õ–∞–±–æ—Ä–∞–Ω—Ç:** –ø–æ–≤—ã—à–∞–µ—Ç —à–∞–Ω—Å —Ç–æ–≥–æ, —á—Ç–æ —Ñ–ª–∞–∫–æ–Ω –Ω–∞–Ω–µ—Å–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É—Ä–æ–Ω.\n\n"
        "*–î–µ—Ä–∂–∏ –∑–∞–ø–∞—Å —Ñ–ª–∞–∫–æ–Ω–æ–≤ –¥–ª—è —Ä–µ–π–¥–æ–≤, –æ–Ω–∏ —á–∞—Å—Ç–æ —Ä–µ—à–∞—é—Ç –∏—Å—Ö–æ–¥ –±–æ—è!*"
    ),
    "bosses": (
        "üìç **üëä –ë–æ—Å—Å—ã ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—Ä–æ—á–Ω–æ—Å—Ç—å**\n"
        "‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî\n"
        "–ó–¥–µ—Å—å —Ç–µ, –∫—Ç–æ –¥–µ—Ä–∂–∏—Ç –∑–æ–Ω—ã. –ó–Ω–∞–π —Å–≤–æ–µ–≥–æ –≤—Ä–∞–≥–∞ –≤ –ª–∏—Ü–æ:\n\n"
        "üíÄ **–ë–µ—Å–ø—Ä–µ–¥–µ–ª—å—â–∏–∫–∏:**\n"
        "‚Ä¢ *–®–∞–π–±–∞:* 300,000 HP. –ü–µ—Ä–≤—ã–π —Å–µ—Ä—å–µ–∑–Ω—ã–π –≤—ã–∑–æ–≤.\n"
        "‚Ä¢ *–î—è–¥—è –ú–∏—à–∞:* 18,000,000 HP. –¢—Ä–µ–±—É–µ—Ç —Ö–æ—Ä–æ—à–µ–π –∫–æ–º–∞–Ω–¥—ã.\n"
        "‚Ä¢ *–•–∏—Ä—É—Ä–≥:* 180,000,000 HP. –¢—É—Ç –Ω—É–∂–Ω—ã —Ç–æ–ø–æ–≤—ã–µ —Å–µ—Ç—ã.\n\n"
        "üëÆ‚Äç‚ôÇÔ∏è **–í–µ—Ä—Ç—É—Ö–∞–∏ (–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è):**\n"
        "‚Ä¢ *–ü–∞–ª—ã—á:* 100,000 HP. –†–∞–∑–º–∏–Ω–∫–∞ –¥–ª—è –Ω–æ–≤–∏—á–∫–∞.\n"
        "‚Ä¢ *–î—é–±–µ–ª—å:* 240,000,000 HP. –ì—Ä–æ–∑–Ω—ã–π –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫ —Å –æ—Ç–ª–∏—á–Ω—ã–º –ª—É—Ç–æ–º.\n"
        "‚Ä¢ *–ì—Ä–æ–º:* 840,000,000 HP. –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è –±–∏—Ç–≤–∞.\n\n"
        "*–ë–µ–π –±–æ—Å—Å–æ–≤ —Å —É–º–æ–º, –∫–æ–æ–ø–µ—Ä–∏—Ä—É–π—Å—è —Å –¥—Ä—É–∑—å—è–º–∏ –ø–æ –∫–∞–º–µ—Ä–µ!*"
    ),
    "sklad": (
        "üìç **üì¶ –°–∫–ª–∞–¥ ‚Äî —Ç–≤–æ–∏ –∑–∞–ø–∞—Å—ã**\n"
        "‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî\n"
        "–í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã —Å–∫–æ—Ä–æ —Å–æ–±–µ—Ä–µ–º –≥–∞–π–¥ –ø–æ ¬´–±–∞—É–ª–∞–º¬ª –∏ –ª–æ–≥–∏—Å—Ç–∏–∫–µ —Ä–µ—Å—É—Ä—Å–æ–≤.\n\n"
        "–ó–¥–µ—Å—å —Ç—ã —É–∑–Ω–∞–µ—à—å:\n"
        "‚Ä¢ –ö—É–¥–∞ –≤—ã–≥–æ–¥–Ω–µ–µ —Ç—Ä–∞—Ç–∏—Ç—å —Å–∞—Ö–∞—Ä.\n"
        "‚Ä¢ –ö–∞–∫ –∫–æ–ø–∏—Ç—å –º—ã–ª–æ –∏ –Ω–∞ —á—Ç–æ –µ–≥–æ –º–µ–Ω—è—Ç—å.\n"
        "‚Ä¢ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–µ—Ä–µ–¥–∞—á–∫–∏.\n\n"
        "*–†–∞–∑–¥–µ–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ, –º—ã –Ω–∞–ø–æ–ª–Ω—è–µ–º –µ–≥–æ —Ç–µ–ø–ª–æ–º –∏ –∏–Ω—Ñ–æ–π!*"
    ),
    "donate": (
        "üìç **üíé –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞**\n"
        "‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî\n"
        "–î–æ—Ä–æ–≥–æ–π –¥—Ä—É–≥, –Ω–∞—à –±–æ—Ç –∂–∏–≤–µ—Ç –∏ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –±–ª–∞–≥–æ–¥–∞—Ä—è —Ç–≤–æ–µ–π –¥–æ–±—Ä–æ—Ç–µ.\n\n"
        "–ú—ã –Ω–µ –±–µ—Ä–µ–º –¥–µ–Ω–µ–≥ –∑–∞ –≥–∞–π–¥—ã, –Ω–æ –∞—Ä–µ–Ω–¥–∞ —Å–µ—Ä–≤–µ—Ä–∞ (—Ö–æ—Å—Ç–∏–Ω–≥–∞) —Ç—Ä–µ–±—É–µ—Ç —Å—Ä–µ–¥—Å—Ç–≤. "
        "–õ—é–±–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–º–æ–∂–µ—Ç –±–æ—Ç—É –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –æ–Ω–ª–∞–π–Ω 24/7 –∏ —Ä–∞–¥–æ–≤–∞—Ç—å —Ç–µ–±—è –Ω–æ–≤—ã–º–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏.\n\n"
        "–ï—Å–ª–∏ —á—É–≤—Å—Ç–≤—É–µ—à—å —Ç–µ–ø–ª–æ –æ—Ç –Ω–∞—à–µ–π —Ä–∞–±–æ—Ç—ã, –Ω–∞–ø–∏—à–∏: @gbg_georg.\n"
        "**–°–ø–∞—Å–∏–±–æ, —á—Ç–æ —Ç—ã —Å –Ω–∞–º–∏!**"
    )
}

# ========== –ö–õ–ê–í–ò–ê–¢–£–†–´ ==========
def kb_main():
    kb = InlineKeyboardMarkup(row_width=2)
    kb.add(
        InlineKeyboardButton("‚ö°Ô∏è –≠–Ω–µ—Ä–≥–∏—è", callback_data="m_energy"),
        InlineKeyboardButton("üó° –§–∏–Ω–∫–∞", callback_data="m_finka"),
        InlineKeyboardButton("üî´ –°–∞–º–æ–ø–∞–ª", callback_data="m_samopal"),
        InlineKeyboardButton("üß™ –Ø–¥", callback_data="m_poison"),
        InlineKeyboardButton("üëä –ë–æ—Å—Å—ã", callback_data="m_bosses"),
        InlineKeyboardButton("üì¶ –°–∫–ª–∞–¥", callback_data="m_sklad"),
        InlineKeyboardButton("üíé –î–æ–Ω–∞—Ç", callback_data="m_donate")
    )
    kb.row(InlineKeyboardButton("üí¨ –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å", callback_data="m_os"))
    return kb

def kb_back():
    return InlineKeyboardMarkup().add(InlineKeyboardButton("‚¨ÖÔ∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –¥–æ–º–æ–π", callback_data="to_main"))

# ========== –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò ==========
@bot.message_handler(commands=['start'])
def start(message):
    try:
        bot.send_photo(message.chat.id, IMAGES["start"], caption=TEXTS["start"], reply_markup=kb_main(), parse_mode="Markdown")
    except Exception as e:
        print(f"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ç–æ: {e}")
        bot.send_message(message.chat.id, TEXTS["start"], reply_markup=kb_main(), parse_mode="Markdown")

@bot.callback_query_handler(func=lambda call: True)
def handle_query(call):
    cid, mid = call.message.chat.id, call.message.message_id
    bot.answer_callback_query(call.id)
    
    def update_ui(img_key, text, kb):
        try:
            media = InputMediaPhoto(IMAGES.get(img_key, IMAGES["start"]), caption=text, parse_mode="Markdown")
            bot.edit_message_media(media, cid, mid, reply_markup=kb)
        except Exception as e:
            # –ï—Å–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –Ω–µ –ø–æ–¥–≥—Ä—É–∑–∏–ª–∞—Å—å, –º–µ–Ω—è–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç
            print(f"UI Update Error: {e}")
            try:
                bot.edit_message_caption(text, cid, mid, reply_markup=kb, parse_mode="Markdown")
            except:
                pass

    if call.data == "to_main": update_ui("start", TEXTS["start"], kb_main())
    elif call.data == "m_energy": update_ui("energy", TEXTS["energy"], kb_back())
    elif call.data == "m_finka": update_ui("finka", TEXTS["finka"], kb_back())
    elif call.data == "m_samopal": update_ui("samopal", TEXTS["samopal"], kb_back())
    elif call.data == "m_poison": update_ui("poison", TEXTS["poison"], kb_back())
    elif call.data == "m_bosses": update_ui("bosses", TEXTS["bosses"], kb_back())
    elif call.data == "m_sklad": update_ui("sklad", TEXTS["sklad"], kb_back())
    elif call.data == "m_donate": update_ui("donate", TEXTS["donate"], kb_back())
    elif call.data == "m_os": update_ui("os", "üí¨ –ú—ã –≤—Å–µ–≥–¥–∞ —Ä–∞–¥—ã –ø–æ–æ–±—â–∞—Ç—å—Å—è! –ü–∏—à–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É: @gbg_georg", kb_back())

# ========== –°–ï–†–í–ï–† ==========
@server.route('/')
def home(): return "TPHbot Alive", 200

if __name__ == '__main__':
    Thread(target=lambda: server.run(host='0.0.0.0', port=8080)).start()
    
    # –û—á–∏—Å—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–∞–¥–µ–Ω–∏–π
    bot.remove_webhook()
    bot.delete_webhook(drop_pending_updates=True)
    time.sleep(1)
    
    print("–ë–æ—Ç –ø—Ä–æ—Å–Ω—É–ª—Å—è –∏ —Å–æ–≥—Ä–µ—Ç!")
    bot.infinity_polling(timeout=20, long_polling_timeout=10)
